- name: yoga-graphql
  definition:
    url: '{{REMOTE_SCHEMA_ENDPOINT}}'
    timeout_seconds: 60
    customization: {}
    forward_client_headers: true
  comment: ""
  permissions:
    - role: anonymous
      definition:
        schema: |
          schema {
            query: Query
          }
          type Class {
            class_name: String!
            created_at: String
            id: ID!
            status: String!
            updated_at: String
          }
          type Query {
            getAllClasses: [Class]
          }
    - role: user
      definition:
        schema: |
          schema {
            query: Query
          }
          type Class {
            class_name: String!
            created_at: String
            id: ID!
            status: String!
            updated_at: String
          }
          type ClassWithStudent {
            class_name: String!
            created_at: String
            id: ID!
            status: String!
            students: [Student]
            updated_at: String
          }
          type Query {
            getAllClasses: [Class]
            getClassByPk(pk: ID): ClassWithStudent!
            getClassesByStudentPk(pk: ID!): [Class]
            getMe: StudentWithClass!
          }
          type Student {
            created_at: String
            email: String!
            full_name: String!
            id: ID!
            status: String!
            updated_at: String
          }
          type StudentWithClass {
            classes: [Class]!
            created_at: String
            email: String!
            full_name: String!
            id: ID!
            status: String!
            updated_at: String
          }
