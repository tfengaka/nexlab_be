- name: yoga-graphql
  definition:
    url: '{{REMOTE_SCHEMA_ENDPOINT}}'
    timeout_seconds: 60
    customization: {}
    forward_client_headers: true
  comment: ""
  permissions:
    - role: anonymous
      definition:
        schema: |
          schema {
            query: Query
          }
          type Class {
            class_name: String!
            created_at: String
            id: ID!
            status: String!
            updated_at: String
          }
          type Query {
            getAllClasses: [Class]
          }
    - role: user
      definition:
        schema: |
          schema {
            query: Query
            mutation: Mutation
          }
          type Class {
            class_name: String!
            created_at: String
            id: ID!
            status: String!
            updated_at: String
          }
          type MessagesOutput {
            messages: String!
          }
          type Mutation {
            change_password(form: FormEditPasswordInput!): MessagesOutput!
            enroll_class(classId: ID!): MessagesOutput!
          }
          type Query {
            getMe: StudentWithClass!
          }
          type StudentWithClass {
            classes: [Class]!
            created_at: String
            email: String!
            full_name: String!
            id: ID!
            status: String!
            updated_at: String
          }
          input FormEditPasswordInput {
            newPassword: String!
            oldPassword: String!
          }
